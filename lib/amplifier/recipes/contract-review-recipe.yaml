recipe:
  name: contract-review-workflow
  version: 1.0.0
  description: Multi-agent contract review demonstrating Word as document intelligence platform

steps:
  - id: legal-analysis
    name: Legal Clause Analysis
    agent: legal-document-analyzer-bundle
    bundle: 08-legal-document-analyzer-bundle.yaml
    prompt: |
      Perform comprehensive legal analysis of the following contract for {{contract_type}}:
      
      {{contract_text}}
      
      Analyze:
      - Contract structure and completeness
      - Standard clauses present/missing
      - Ambiguous or problematic language
      - Rights and obligations of each party
      - Termination and dispute resolution provisions
      - Intellectual property clauses
      - Confidentiality provisions
      
      Flag:
      - Missing critical clauses
      - One-sided terms
      - Unclear obligations
      - Potential enforcement issues
      
      Provide clause-by-clause assessment with risk levels.

  - id: financial-terms-review
    name: Financial Terms Analysis
    agent: financial-analyzer-bundle
    bundle: 06-financial-analyzer-bundle.yaml
    prompt: |
      Analyze the financial terms and obligations in the contract reviewed in the previous step.
      
      Examine:
      - Payment terms and schedules
      - Pricing structure and calculations
      - Financial penalties and liquidated damages
      - Expense allocation and reimbursement
      - Currency and exchange rate provisions
      - Financial reporting requirements
      
      Assess:
      - Cash flow impact
      - Financial risk exposure
      - Reasonableness of terms
      - Comparison to market standards
      
      Identify favorable and unfavorable financial terms with specific recommendations.

  - id: risk-assessment
    name: Risk & Compliance Assessment
    agent: code-reviewer-bundle
    bundle: 04-code-reviewer-bundle.yaml
    prompt: |
      Perform risk and compliance assessment for this {{contract_type}} contract.
      
      Based on the legal and financial analysis from previous steps:
      
      **Risk Analysis:**
      - Identify top 5 risks (legal, financial, operational)
      - Assess likelihood and impact
      - Recommend risk mitigation strategies
      
      **Compliance Check:**
      - Data privacy compliance (GDPR, CCPA)
      - Industry-specific regulations
      - Corporate policy alignment
      - Regulatory reporting requirements
      
      **Overall Assessment:**
      - Risk level (High/Medium/Low)
      - Deal-breaker issues (if any)
      - Key negotiation points
      - Required approvals or escalations
      
      Provide executive summary of findings.

  - id: review-summary
    name: Comprehensive Review Summary
    agent: documentation-bundle
    bundle: 02-documentation-bundle.yaml
    prompt: |
      Create a comprehensive contract review summary document based on all previous analysis.
      
      Structure the document with:
      
      **Executive Summary**
      - Contract overview
      - Overall recommendation (Approve/Approve with changes/Reject)
      - Top 3 most critical issues
      
      **Detailed Findings**
      - Legal issues (from step 1)
      - Financial concerns (from step 2)
      - Risks and compliance (from step 3)
      
      **Recommendations**
      - Required changes before signing
      - Suggested improvements
      - Negotiation priorities
      
      **Next Steps**
      - Required approvals
      - Legal counsel review items
      - Timeline considerations
      
      Format as a professional review memo suitable for stakeholder distribution.
